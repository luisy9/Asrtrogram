---
if (Astro.request.method === "POST") {
  try {
    const data = await Astro.request.formData();
    const name = data.get("name");
    const password = data.get("password");

    const url = "http://localhost:3000/api";

    const login = await fetch(`${url}/login`, {
      method: "POST",
      credentials: "include",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({ name: name, password: password }),
    })
      .then((res) => res.json())
      .then((user) => console.log(user))
      .catch((error) => console.log(error));

    console.log(login);
  } catch (error) {
    if (error instanceof Error) {
      console.error(error.message);
    }
  }
}
---

<div class="w-full h-screen bg-[#101826]">
  <div class="h-full">
    <div class="flex justify-center items-center bg-red-400">
      <h1 class="text-white text-3xl">Login Astrogram</h1>
    </div>
    <form method="POST">
      <div class="h-full flex justify-center items-center">
        <div class="w-6/12 rounded-md flex justify-center py-2 bg-red-500">
          <div
            class="flex flex-col items-center justify-center gap-4 w-full py-5"
          >
            <div class="w-full px-5">
              <input
                type="text"
                class="border border-white h-14 w-full"
                name="name"
              />
            </div>
            <div class="w-full px-5">
              <input
                type="text"
                class="border border-white h-14 w-full"
                name="password"
              />
            </div>
            <div class="">
              <button class="text-3xl">Login</button>
            </div>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>
