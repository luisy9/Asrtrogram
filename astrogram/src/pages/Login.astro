---
if (Astro.request.method === "POST") {
  try {
    const data = await Astro.request.formData();
    const name = data.get("name");
    const password = data.get("password");

    const url = "http://localhost:3000/api";

    const login = await fetch(`${url}/login`, {
      method: "POST",
      credentials: "include",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({ name: name, password: password }),
    })
      .then((res) => res.json())
      .then((user) => console.log(user))
      .catch((error) => console.log(error));

    console.log(login);
  } catch (error) {
    if (error instanceof Error) {
      console.error(error.message);
    }
  }
}
---

<div class="w-full h-screen bg-[#0F1218]">
  <div class="">
    <div class="w-full h-screen flex justify-center items-center">
      <div class="w-11/12 h-2/6">
        <div class="flex justify-center pb-20">
          <h1 class="text-8xl text-semibold text-white">
            Astrogram
          </h1>
        </div>
        <form method="POST">
          <div class="rounded-md py-2 px-5">
            <div
              class="flex flex-col items-center justify-center gap-12 w-full py-5"
            >
              <div class="w-full">
                <input
                  type="text"
                  class="h-28 px-2 py-3 border rounded-lg border-white bg-transparent w-full
                  placeholder:px-2 placeholder:pt-0 placeholder:text-[3rem] placeholder:font-thin text-[#8F8F8F] placeholder:text-[#8F8F8F]"
                  placeholder="User name"
                  name="name"
                />
              </div>
              <div class="w-full">
                <input
                  type="text"
                  class="h-28 px-2 py-3 border rounded-lg border-white bg-transparent w-full text-[#8F8F8F]
                placeholder:px-2 placeholder:pt-0 placeholder:text-[3rem] placeholder:font-thin placeholder:text-[#8F8F8F]"
                  placeholder="Password"
                  name="password"
                />
              </div>
              <div class="w-full">
                <button
                  class="text-5xl py-8 text-black border rounded-lg w-full bg-white"
                  >Login</button
                >
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
